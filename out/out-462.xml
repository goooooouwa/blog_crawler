<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
<channel>
<title>Coding Horror</title>
<description>programming and human factors</description>
<link>https://blog.codinghorror.com/</link>
<pubDate>Sun, 19 Apr 2020 00:00:01 GMT</pubDate>
<!-- other elements omitted from this example -->
<item>
<title>Sorting for Humans : Natural Sort Order</title>
<link>https://blog.codinghorror.com/sorting-for-humans-natural-sort-order/</link>
<content>
                <!--kg-card-begin: markdown--><p>
The default sort functions in almost every programming language are <b>poorly suited for human consumption</b>. What do I mean by that? Well, consider the difference between sorting filenames in Windows explorer, and sorting those very same filenames via <code>Array.Sort()</code> code:
</p>
<p>
</p>
<table cellpadding="4" cellspacing="4">
<tr>
<td>Explorer shell sort
</td>
<td>
<code>Array.Sort()</code>
</td>
</tr>
<tr>
<td>
<img alt="alphabetical sort" border="0" class="at-xid-6a0120a85dcdae970b0120a86dab4e970b" height="463" src="https://blog.codinghorror.com/content/images/uploads/2007/12/6a0120a85dcdae970b0120a86dab4e970b-pi.png" width="135">
</td>
<td>
<img alt="ASCIIbetical sort" border="0" class="at-xid-6a0120a85dcdae970b0120a86dab69970b" height="438" src="https://blog.codinghorror.com/content/images/uploads/2007/12/6a0120a85dcdae970b0120a86dab69970b-pi.png" width="111">
</td>
</tr>
</table>
<p>
Quite a difference.
</p>
<p>
I can say without the slightest hint of exaggeration that <b>this exact sorting problem has been a sore point on every single project I've ever worked on</b>. Users will inevitably complain that their items aren't sorting properly, and file bugs on these "errors". Being <a href="http://www.codinghorror.com/blog/archives/000091.html">card-carrying members of the homo logicus club</a>, we programmers produce a weary sigh, and try to keep any obvious eye-rolling in check as we patiently inform our users that this <i>isn't</i> an error. Items <i>are</i> sorting in proper order. Proper <i>ASCII</i> order, that is. As we're walking away, hopefully you won't hear us mutter under our breath what we're actually thinking-- "Stupid users! They don't even understand how sorting works!"
</p>
<p>
I always felt a pang of regret when rejecting these requests. Honestly, look at those two lists-- <b>what sane person would want ASCII order?</b> It's a completely nonsensical ordering to anyone who doesn't have <a href="http://www.cdrummond.qc.ca/cegep/informat/Professeurs/Alain/files/ascii.htm">the ASCII chart</a> committed to memory (and by the way, uppercase A is decimal 65). I never really understood that there was another way to sort, even though natural sort has been right in front of us all along in the form of Mac Finder and Windows Explorer file listings. I had language-induced blinders on. If our built-in <code>sort</code> returns in ASCII order, then that must be correct. It was bequeathed upon us by the Language Gods. Can there <i>be</i> any other way?
</p>
<p>
Kate Rhodes is a bit up in arms about <a href="http://weblog.masukomi.org/2007/12/10/alphabetical-asciibetical">our collective ignorance of ASCIIbetical vs. Alphabetical</a>. Can't say I blame her. I'm as guilty as anyone. Turns out the users weren't the stupid ones after all -- <i>I was</i>.
</p>
<p>
</p>
<blockquote>
Silly me, I just figured that alphabetical sorting was such a common need (judging by the number of people asking how to do it I'm not wrong either) that I wouldn't have to write the damn thing. But I didn't count on the stupid factor. Jesus Christ people. You're programmers. You're almost all college graduates and none of you know what the f**k "Alphabetical" means. You should all be ashamed. If any of you are using your language's default sort algorithm, which is almost guaranteed to be ASCIIbetical (for good reason) to get alphabetical sorting you proceed to the nearest mirror and slap yourself repeatedly before returning to your desks and fixing your unit tests that didn't catch this problem.
</blockquote>
<p>
It isn't called "Alphabetical sort"; it's collectively known as <b>natural sort</b>. But she's right about one thing: it's hard to find information on natural sorting, and many programmers are completely ignorant of it. None of the common computer languages (that I know of) implement anything other than ASCIIbetical sorts. There are a few places you can find natural sort algorithms, however:
</p>
<p>
</p>
<ul>
<li>Dave Koelle's <a href="http://www.davekoelle.com/alphanum.html">The Alphanum Algorithm</a>
</li>
<li>Martin Pool's <a href="http://sourcefrog.net/projects/natsort/">Natural Order String Comparison</a>
</li>
<li>Ian Griffiths' <a href="http://www.interact-sw.co.uk/iangblog/2007/12/13/natural-sorting">Natural Sorting in C#</a>
</li>
<li>Ned Batchelder's <a href="http://nedbatchelder.com/blog/200712.html#e20071211T054956">Compact Python Human Sort</a>, along with Jussi Salmela's <a href="http://personal.inet.fi/cool/operator/Human%20Sort.py">internationalized version</a> of same.
</li>
</ul>
<p>
Don't let Ned's clever Python ten-liner fool you. Implementing a natural sort is more complex than it seems, and not just for <a href="http://www.codinghorror.com/blog/archives/000813.html">the gnarly i18n</a> issues I've hinted at, above. But the Python implementations are impressively succinct. One of Ned's commenters posted this version, which is even shorter:
</p>
<p>
</p>
<pre>
import re
def sort_nicely( l ):
""" Sort the given list in the way that humans expect.
"""
convert = lambda text: int(text) if text.isdigit() else text
alphanum_key = lambda key: [ convert(c) for c in re.split('([0-9]+)', key) ]
l.sort( key=alphanum_key )
</pre>
<p>
I tried to come up with a clever, similarly succinct C# 3.0 natural sort implementation, but I failed. I'm not interested in a one-liner contest, necessarily, but it does seem to me that a basic natural sort shouldn't require the 40+ lines of code it takes in most languages.
</p>
<p>
As programmers, we'd do well to keep Kate's lesson in mind: <b>ASCIIbetical does not equal alphabetical</b>. ASCII sorting serves the needs of the computer and the compiler, but what about us human beings? <b>Perhaps a more human-friendly natural sort option should be built into mainstream programming languages</b>, too.
</p>
<p>
</p>
<p></p>
<!--kg-card-end: markdown-->
            </content>
<pubDate>2007-12-12T12:00:00.000Z</pubDate>
<guid>https://blog.codinghorror.com/sorting-for-humans-natural-sort-order/</guid>
</item>
</channel>
</rss>
