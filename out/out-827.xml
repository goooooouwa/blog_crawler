<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
<channel>
<title>Coding Horror</title>
<description>programming and human factors</description>
<link>https://blog.codinghorror.com/</link>
<pubDate>Sun, 19 Apr 2020 00:00:01 GMT</pubDate>
<!-- other elements omitted from this example -->
<item>
<title>A Comparison of JPEG Compression Levels and Recompression</title>
<link>https://blog.codinghorror.com/a-comparison-of-jpeg-compression-levels-and-recompression/</link>
<content>
                <!--kg-card-begin: markdown--><p>
Over the years, I've standardized on a <b>JPEG compression factor of 15</b>; I find that generally provides the best compromise between image quality and file size for most photographic images.
</p>
<p>
Although I've done some ad-hoc testing that pointed to compression factor 15 as the sweet spot before, I've never done a formal test. So I performed a JPEG compression series using the <a href="http://www-ece.rice.edu/~wakin/images/">Lena reference image</a>*. Note that I resized the image slightly (from 512x512 to 384x384) to keep the file sizes relatively small. The original, uncompressed image size is <font color="red">433 kilobytes</font>.
</p>
<p>
</p>
<table>
<tr>
<td>
<b>compression factor 10</b> (39 kb)
</td>
<td>
<b>compression factor 15</b> (30 kb)
</td>
</tr>
<tr>
<td>
<img alt="Lena image, compression factor 10" border="0" class="at-xid-6a0120a85dcdae970b0128776fd82a970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd82a970c-pi.jpg" width="384">
</td>
<td>
<img alt="Lena image, compression factor 15" border="0" class="at-xid-6a0120a85dcdae970b0128776fd840970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd840970c-pi.jpg" width="384">
</td>
</tr>
<tr>
<td>
<b>compression factor 20</b> (26 KB)
</td>
<td>
<b>compression factor 30</b> (16 KB)
</td>
</tr>
<tr>
<td>
<img alt="Lena image, compression factor 20" border="0" class="at-xid-6a0120a85dcdae970b0128776fd855970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd855970c-pi.jpg" width="384">
</td>
<td>
<img alt="Lena image, compression factor 30" border="0" class="at-xid-6a0120a85dcdae970b0128776fd85f970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd85f970c-pi.jpg" width="384">
</td>
</tr>
<tr>
<td>
<b>compression factor 40</b> (11 KB)
</td>
<td>
<b>compression factor 50</b> (9 KB)
</td>
</tr>
<tr>
<td>
<img alt="Lena image, compression factor 40" border="0" class="at-xid-6a0120a85dcdae970b0128776fd86a970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd86a970c-pi.jpg" width="384">
</td>
<td>
<img alt="Lena image, compression factor 50" border="0" class="at-xid-6a0120a85dcdae970b0128776fd878970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd878970c-pi.jpg" width="384">
</td>
</tr>
</table>
<p>
Beyond 50 percent compression factor, quality falls off a cliff, so I won't bother displaying anything higher. Here's a more complete breakdown of JPEG compression factor and file size for the 384x384 Lena image:
</p>
<p>
<img alt="JPEG Compression Level vs. File Size graph" border="0" class="at-xid-6a0120a85dcdae970b0128776fd889970c" height="303" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd889970c-pi.png" width="457">
</p>
<p>
I was also curious what the image quality and file size penalty was for <b>recompressing a JPEG image</b>. That is, opening a JPEG and re-saving it as a JPEG, including all the artifacts from the original compressed image in the recompression. I've been forced to do this when I couldn't find an uncompressed or high quality version of the image I needed, and I always wondered how much worse it made the image when I recompressed it.
</p>
<p>
For the recompression test, I started with the uncompressed, resized 384x384 Lena reference image. For each new generation, I opened and saved the previous generation with my standard JPEG compression factor of 15.
</p>
<p>
</p>
<table>
<tr>
<td>Generation 1 (30kb)
</td>
<td>Generation 2 (30kb)
</td>
</tr>
<tr>
<td>
<img alt="Lena image, generation 1" border="0" class="at-xid-6a0120a85dcdae970b0128776fd898970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd898970c-pi.jpg" width="384">
</td>
<td>
<img alt="Lena image, generation 2" border="0" class="at-xid-6a0120a85dcdae970b0128776fd8a1970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd8a1970c-pi.jpg" width="384">
</td>
</tr>
<tr>
<td>Generation 3 (30kb)
</td>
<td>Generation 4 (30kb)
</td>
</tr>
<tr>
<td>
<img alt="Lena image, generation 3" border="0" class="at-xid-6a0120a85dcdae970b0128776fd8b5970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd8b5970c-pi.jpg" width="384">
</td>
<td>
<img alt="Lena image, generation 4" border="0" class="at-xid-6a0120a85dcdae970b0128776fd8c8970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd8c8970c-pi.jpg" width="384">
</td>
</tr>
<tr>
<td>Generation 5 (30kb)
</td>
<td>Generation 10 (30kb)
</td>
</tr>
<tr>
<td>
<img alt="Lena image, generation 5" border="0" class="at-xid-6a0120a85dcdae970b0128776fd8e4970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd8e4970c-pi.jpg" width="384">
</td>
<td>
<img alt="Lena image, generation 10" border="0" class="at-xid-6a0120a85dcdae970b0128776fd8f5970c" height="384" src="https://blog.codinghorror.com/content/images/uploads/2006/07/6a0120a85dcdae970b0128776fd8f5970c-pi.jpg" width="384">
</td>
</tr>
</table>
<p>
I was quite surprised to find that there's <b>very little visual penalty for recompressing a JPEG once, twice, or even three times.</b> By generation five, you can see a few artifacts emerge in the image, and by generation ten, you're definitely in trouble. There's virtually no effect at all on file size, which stays constant at 30-31 kilobytes even through generation 15.
</p>
<p>
* An entire set of classic reference images is available from the <a href="http://sipi.usc.edu/database/database.cgi?volume=misc">USC-SIPI image database</a>. I distinctly remember that <a href="http://sipi.usc.edu/database/database.cgi?volume=misc&amp;image=11#top">Mandrill image</a> from my Amiga days.
</p>
<p>
</p>
<p></p>
<!--kg-card-end: markdown-->
            </content>
<pubDate>2006-07-06T12:00:00.000Z</pubDate>
<guid>https://blog.codinghorror.com/a-comparison-of-jpeg-compression-levels-and-recompression/</guid>
</item>
</channel>
</rss>
