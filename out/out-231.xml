<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
<channel>
<title>Coding Horror</title>
<description>programming and human factors</description>
<link>https://blog.codinghorror.com/</link>
<pubDate>Sun, 19 Apr 2020 00:00:01 GMT</pubDate>
<!-- other elements omitted from this example -->
<item>
<title>A Modest Proposal for the Copy and Paste School of Code Reuse</title>
<link>https://blog.codinghorror.com/a-modest-proposal-for-the-copy-and-paste-school-of-code-reuse/</link>
<content>
                <!--kg-card-begin: markdown--><p>
Is <b>copying and pasting code</b> dangerous? Should control-c and control-v be treated not as essential programming keyboard shortcuts, but registered weapons?
</p>
<p>
<img alt="keyboard: ctrl-c, ctrl-v" border="0" class="at-xid-6a0120a85dcdae970b0128777096b1970c" height="308" src="https://blog.codinghorror.com/content/images/uploads/2009/04/6a0120a85dcdae970b0128777096b1970c-pi.jpg" width="587">
</p>
<p>
(yes, I know that in OS X, the keyboard shortcut for cut and paste uses "crazy <a href="http://en.wikipedia.org/wiki/Love_Symbol">Prince symbol key</a>" instead of control, like God intended. Any cognitive dissonance you may be experiencing right now is also intentional.)
</p>
<p>
Here's my position on copy and paste for programmers:
</p>
<p>
</p>
<blockquote>
Copy and paste doesn't create bad code. Bad programmers create bad code.
</blockquote>
<p>
Or, if you prefer, guns don't kill people, <i>people</i> kill people. Just make sure that source code isn't pointed at me when it goes off. There are always risks. When you copy and paste code, vigilance is required to make sure you (or someone you work with) isn't falling into the trap of <a href="http://www.stevemcconnell.com/ieeesoftware/bp16.htm">copy and paste code duplication</a>:
</p>
<p>
</p>
<blockquote>
Undoubtedly the most popular reason for creating a routine is to avoid duplicate code. Similar code in two routines is a warning sign. <b>David Parnas says that if you use copy and paste while you're coding, you're probably committing a design error.</b> Instead of copying code, move it into its own routine. Future modifications will be easier because you will need to modify the code in only one location. The code will be more reliable because you will have only one place in which to be sure that the code is correct.
</blockquote>
<p>
Some programmers agree with Parnas, going so far as to <a href="http://www.secretgeek.net/copy_paste_dont_do_it.asp">advocate disabling cut and paste entirely</a>. I think that's rather extreme. I use copy and paste while programming all the time, but <b>never in a way that runs counter to <a href="http://www.codinghorror.com/blog/archives/000805.html">Curly's Law</a></b>.
</p>
<p>
But pervasive high-speed internet -- and a whole new generation of hyper-connected young programmers weaned on the web -- has changed the dynamics of programming. Copy and paste is no longer a pejorative term, but a simple observation about how a lot of modern coding gets done, like it or not. This new dynamic was codified into law as <a href="http://www.secretgeek.net/open_code_sharing.asp">Bambrick's 8th Rule of Code Reuse</a>:
</p>
<p>
</p>
<blockquote>
It's far easier and much less trouble to find and use a bug-ridden, poorly implemented snippet of code written by a 13 year old blogger on the other side of the world than it is to find and use the equivalent piece of code written by your team leader on the other side of a cubicle partition.
<p>
(And I think that <a href="http://secretgeek.net/howtobeaprogrammer.asp">the copy and paste school of code reuse</a> is flourishing, and will always flourish, even though it gives very suboptimal results.)
</p>
</blockquote>
<p>
<a href="http://www.secretgeek.net/open_code_sharing.asp">Per Mr. Bambrick</a>, copy and pasted code from the internet is <b>good</b> because:
</p>
<p>
</p>
<ul>
<li>Code stored on blogs, forums, and the web in general is very easy to find.
</li>
<li>You can inspect the code before you use it.
</li>
<li>Comments on blogs give some small level of feedback that might improve quality.
</li>
<li>Pagerank means that you're more likely to find code that might be higher quality.
</li>
<li>Code that is easy to read and understand will be copied and pasted more, leading to a sort of viral reproductive dominance.
</li>
<li>The programmer's ego may drive her to only publish code that she believes is of sufficient quality.
</li>
</ul>
<p>
But copy and pasted code from the internet is <b>bad</b> because:
</p>
<p>
</p>
<ul>
<li>If the author improves the code, you're not likely to get those benefits.
</li>
<li>If you improve the code, you're not likely to pass those improvements back to the author.
</li>
<li>Code may be blindly copied and pasted without understanding what the code actually does.
</li>
<li>Pagerank doesn't address the quality of the code, or its fitness for your purpose.
</li>
<li>Code is often 'demo code' and may purposely gloss over important concerns like error handling, sql injection, encoding, security, etc.
</li>
</ul>
<p>
Now, if you're copying entire projects or groups of files, you should be inheriting that code from a project that's already under proper source control. That's just basic software engineering (we hope). But the type of code I'm likely to cut and paste <i>isn't</i> entire projects or files.  It's probably a <b>code snippet</b> -- an algorithm, a routine, a page of code, or perhaps a handful of functions. There are several established code snippet sharing services:
</p>
<p>
</p>
<ul>
<li>
<a href="http://snippets.dzone.com/">DZone Snippets</a>
</li>
<li>
<a href="http://snipplr.com/">Snipplr</a>
</li>
<li>
<a href="http://refactormycode.com/">Refactor My Code</a>
</li>
<li>
<a href="http://www.codeproject.com/">CodeProject</a>
</li>
</ul>
<p>
Source control is great, but it's massive overkill for, say, <a href="http://snipplr.com/view/12252/animate-a-fadeout-of-a-nswindow-with-objectivec/">this little Objective-C animation snippet</a>:
</p>
<p>
</p>
<pre>
- (void)fadeOutWindow:(NSWindow*)window{
float alpha = 1.0;
[window setAlphaValue:alpha];
[window makeKeyAndOrderFront:self];
for (int x = 0; x &lt; 10; x++) {
alpha -= 0.1;
[window setAlphaValue:alpha];
[NSThread sleepForTimeInterval:0.020];
}
}
</pre>
<p>
To me, the most troubling limitation of <a href="http://everything2.com/title/copypasta">copypasta programming</a> is the complete disconnect between the code you've pasted and all the other viral copies of it on the web. It's impossible to locate new versions of the snippet, or fold your features and bugfixes back into the original snippet. Nor can you possibly hope to find all the other nooks and crannies of code all over the world this snippet has crept into.
</p>
<p>
What I propose is this:
</p>
<p>
</p>
<pre>
<font color="red">// codesnippet:1c125546-b87c-49ff-8130-a24a3deda659</font>
- (void)fadeOutWindow:(NSWindow*)window{
// code
}
}
</pre>
<p>
Attach <b>a one line comment convention</b> with <a href="http://createguid.com/">a new GUID</a> to any code snippet you publish on the web. This ties the snippet of code to its author and any subsequent clones. A trivial search for the code snippet GUID would identify every other copy of the snippet on the web:
</p>
<p>
</p>
<pre>
http://www.google.com/search?q=<font color="red">1c125546-b87c-49ff-8130-a24a3deda659</font>
</pre>
<p>
I realize that what I'm proposing, as simple as it is, might still be an onerous requirement for copy-paste programmers. They're too busy copying and pasting to bother with silly conventions! Instead, imagine the centralized code snippet sharing services <b>automatically applying a snippet GUID comment to every snippet they share</b>. If they did, this convention could get real traction virtually overnight. And why not? We're just following the fine software engineering tradition of <a href="http://www.globalnerdy.com/2007/06/01/do-the-stupidest-thing-that-could-possibly-work/">doing the stupidest thing that could possibly work</a>.
</p>
<p>
No, it isn't a perfect system, by any means. For one thing, variants and improvements of the code would probably need their own snippet GUID, ideally by adding a second line to indicate the parent snippet they were derived from. And what do you do when you combine snippets with your own code, or merge snippets together? But let's not over think it, either. This is a simple, easily implementable improvement over what we have now: utter copy-and-paste code chaos.
</p>
<p>
Sometimes, <b>small code requires small solutions</b>.
</p>
<p>
</p>
<p></p>
<!--kg-card-end: markdown-->
            </content>
<pubDate>2009-04-21T12:00:00.000Z</pubDate>
<guid>https://blog.codinghorror.com/a-modest-proposal-for-the-copy-and-paste-school-of-code-reuse/</guid>
</item>
</channel>
</rss>
